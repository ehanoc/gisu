# Gisu



## Getting Started

Install dependencies and run the application with your package manager. If you
use `npm` run

```
$ npm install
$ npm start
```

or if you use `yarn`,

```
$ yarn
$ yarn start
```

You can choose to run sever and client tasks separately by running `start:server`
and `start:client` scripts.



## Project Overview

This project is structured in two parts, the server source (backend) and the
client source.

### Client

The client uses React to model the DOM and manage the application state. An API
wrapper is implemented to simplify and provide helpers for the communication
with the backend.

There are two different client views which are the Story Builder and the Story
Viewer.

The **Story Builder** is implemented using React, Sass and D3.js. D3.js library is
used to build the Graph View, which is a component that allows the user to
interact with the story nodes visually. While it's the core of this part of the
client, it's behavior is implemented outside of the view, so the view could be
replaced with something else if handling D3.js turns too complicated.

Outside of the Graph View, the UI is made using React and Sass, also making
use of Material UI. The UI consists in a Panel that lets you inspect a node or
an edge, change it's data (media, text, etc) and it was intended to let you
navigate the story graph through some buttons.

The **Story Viewer** is a totally custom project made in React and Sass. It is built
as a slide manager which build slides from story items and let the user progress
though the story and choose options.

### Server

The server implements an API to serve story and node data.

The API implementation can be found in `api/v0` folder. It uses express routers
to handle path structure and it is versioned using path and more folders and
routers can  be created in the future to allow different version of the API.

Stories are saved into JSON files inside `data/stories` folder. The `data`
folder holds a wrapper module for filesystem data handling, a template for the
story used by the application to initialize a new story and an example for the
developer.

Client's file bundles, generated by Webpack, are stored in `static/bundles/` and
media assets uploads are stored in `static/uploads/`

The `views` folder holds the HTML for layouts. Everything else is rendered by
React on page load time.

This is a mockup implementation so not all the features are working nor is
intended for production use.

### API

The API was initially defined having in mind the future implementation that will
use Ethereum Smart Contracts to approve and perform data changes in the story
tree. You can see the definition [here](./docs/api.md).

The current API takes this into account but reduces it's complexity to simply
update and retrieve full stories, instead of the granular approach thought for
using with Ethereum Smart Contracts.



## Dependencies

The current implementation has five core dependencies Webpack, React, MaterialUI,
Sass and D3.js. Additionally, Babel is used to support latest es6+ features and
could be dropped if it's decided to only support latest browsers and node
versions.

[Babel][babel] is mainly used to enable last ECMAScript features without waiting
for the browsers to support them. You can totally remove Babel dependencies
except from `babel-plugin-react-css-modules` which is a dependency to load scss
files as a dictionary of (class name => compiled class name). You can use this
dependency without babel, check [react-css-modules][react-css-modules]
repository.

D3.js is used to build the graph. It's widely used to generate data
visualizations. You can visit their [official site][d3-js] to get more
information.

[Material UI][material-ui] is a library of components for React that implements
Google's Material Design. You can create a [custom theme][material-ui-custom-theme]
to style it. While it is present in many modules in the frontend, it could be
replaced by custom components. The toolchain is prepared to bundle React
components that uses React CSS modules.

Then there is Webpack, React, only for Frontend stuff. And Express to implement
the backend. Webpack dev server and nodemon are utilities to improve development
experience.

`whatwg-fetch` is a polyfill for `fetch` API.

Those are the main dependencies. Everything else can be replaced
or are not crucial for the project.

[babel]: https://babeljs.io/
[d3-js]: https://d3js.org/
[material-ui]: https://material-ui-next.com
[material-ui-custom-theme]: https://material-ui-next.com/customization/themes/
[react-css-modules]: https://github.com/gajus/react-css-modules
